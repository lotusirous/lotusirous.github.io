<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Description" content="Lotusirous's Blog">
    <title>Running Mysql server in container | Kha Nguyen</title>

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <link rel="stylesheet" href="/css/syntax.css" />
    </head>

  <body role="main">
    <nav role="navigation">
      <ul class="menu">
        
        <li><a href="/about">About</a></li>
        
        <li><a href="/posts/">Posts</a></li>
        
        <li><a href="/categories/">Categories</a></li>
        
        <li><a href="/tags/">Tags</a></li>
        
        <li><a href="/index.xml">Subscribe</a></li>
        
      </ul>
      <hr/>
    </nav>



<div class="article-meta">
  <h1 role="heading"><span class="title">Running Mysql server in container</span></h1>
  <div class="article-description" role="contentinfo">

    
    <span>
      
      <svg class="icon" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="16" y1="2" x2="16" y2="6"></line>
        <line x1="8" y1="2" x2="8" y2="6"></line>
        <line x1="3" y1="10" x2="21" y2="10"></line>
      </svg>
      <time datetime="2018-11-04 00:17:26 &#43;0900 KST">November 4, 2018</time>
    </span>

    
    <span class="author">
      <svg class="icon" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true">
        <path d="M21,21V20c0-2.76-4-5-9-5s-9,2.24-9,5v1"></path>
        <path d="M16,6.37A4,4,0,1,1,12.63,3,4,4,0,0,1,16,6.37Z"></path>
      </svg>
      
    </span>

    
    <span>
      <svg class="icon" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 15 15"></polyline>
      </svg>
      1 minutes
    </span>
  </div>

</div>


<main role="main">
  

<h2 id="install-mysql-as-container">Install mysql as container</h2>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">shell&gt; docker pull mysql/mysql-server
shell&gt; docker images
shell&gt; docker run --name<span class="o">=</span>mysql1 -d mysql/mysql-server</code></pre></div>
<p>It generates default <em>root</em> password</p>
<div class="highlight"><pre class="chroma">shell&gt; docker logs mysql1</pre></div>
<p>use generated password for login by root user</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">shell&gt; docker logs mysql1 <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">|</span> grep GENERATED
GENERATED ROOT PASSWORD: Axegh3kAJyDLaRuBemecis<span class="p">&amp;</span>EShOs</code></pre></div>
<h2 id="connecting-to-mysql-server-from-within-the-container">Connecting to MySQL Server from within the Container</h2>
<div class="highlight"><pre class="chroma">docker exec -it mysql1 mysql -uroot -p</pre></div>
<p>by password: <code>Axegh3kAJyDLaRuBemecis&amp;EShOs</code>.</p>

<p>At this step, Mysql does not allow you to query such as <code>show databases</code>, thus we have to change default password</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">ALTER</span> <span class="k">USER</span> <span class="s1">&#39;root&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">&#39;newpassword&#39;</span><span class="p">;</span></code></pre></div>
<h2 id="where-is-our-data">Where is our data ?</h2>

<p>In container</p>
<div class="highlight"><pre class="chroma">shell&gt; docker exec -it mysql1 bash
bash-4.2# ls /var/lib/mysql
auto.cnf    ca.pem	     client-key.pem  ib_logfile0  ibdata1  mysql       mysql.sock.lock	   private_key.pem  server-cert.pem  sys
ca-key.pem  client-cert.pem  ib_buffer_pool  ib_logfile1  ibtmp1   mysql.sock  performance_schema  public_key.pem   server-key.pem</pre></div><div class="highlight"><pre class="chroma">docker inspect mysql1</pre></div><div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="s2">&#34;Volumes&#34;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&#34;/var/lib/mysql&#34;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span></code></pre></div>
<h1 id="references">References</h1>

<ul>
<li><a href="https://dev.mysql.com/doc/mysql-installation-excerpt/5.5/en/docker-mysql-getting-started.html">https://dev.mysql.com/doc/mysql-installation-excerpt/5.5/en/docker-mysql-getting-started.html</a></li>
<li><a href="https://dev.mysql.com/doc/mysql-installation-excerpt/5.5/en/docker-mysql-more-topics.html">https://dev.mysql.com/doc/mysql-installation-excerpt/5.5/en/docker-mysql-more-topics.html</a></li>
</ul>

</main>

<footer role="contentinfo">

  <hr>
  Â© <a href="https://lotusirous.github.io/" role="link">Kha Nguyen</a> | <a href="https://github.com/lotusirous" role="link">Github</a>
  | <a href="https://twitter.com/__ngtrongkha" role="link">Twitter</a>


  
</footer>
</body>


<script>
  
  (function () {
    var i, text, code, codes = document.getElementsByTagName('code');
    for (i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$(.|\s)+\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML; 
          continue;
        }
      }
      i++;
    }
  })();

  

  (function () {
    function center_el(tagName) {
      var tags = document.getElementsByTagName(tagName),
        i, tag;
      for (i = 0; i < tags.length; i++) {
        tag = tags[i];
        var parent = tag.parentElement;
        
        if (parent.childNodes.length === 1) {
          
          if (parent.nodeName === 'A') {
            parent = parent.parentElement;
            if (parent.childNodes.length != 1) continue;
            parent.firstChild.style.border = 'none';
          }
          if (parent.nodeName === 'P') parent.style.textAlign = 'center';
        }
      }
    }
    var tagNames = ['img', 'embed', 'object'];
    for (var i = 0; i < tagNames.length; i++) {
      center_el(tagNames[i]);
    }
  })();
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-125798626-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'UA-125798626-1');
</script>


</html>